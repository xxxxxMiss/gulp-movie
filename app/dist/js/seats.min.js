"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t,i,e){function s(s,o){this.wrapper="string"==typeof s?i.querySelector(s):s,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={zoomMin:1,zoomMax:4,startZoom:1,resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,disablePointer:!a.hasPointer,disableTouch:a.hasPointer||!a.hasTouch,disableMouse:a.hasPointer||a.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:"undefined"==typeof t.onmousedown};for(var n in o)this.options[n]=o[n];this.translateZ=this.options.HWCompositing&&a.hasPerspective?" translateZ(0)":"",this.options.useTransition=a.hasTransition&&this.options.useTransition,this.options.useTransform=a.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?a.ease[this.options.bounceEasing]||a.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.options.useTransition||this.options.useTransform||/relative|absolute/i.test(this.scrollerStyle.position)||(this.scrollerStyle.position="relative"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this.scale=e.min(e.max(this.options.startZoom,this.options.zoomMin),this.options.zoomMax),this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function o(t,e,s){var o=i.createElement("div"),n=i.createElement("div");return s===!0&&(o.style.cssText="position:absolute;z-index:9999",n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),n.className="iScrollIndicator","h"==t?(s===!0&&(o.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",n.style.height="100%"),o.className="iScrollHorizontalScrollbar"):(s===!0&&(o.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",n.style.width="100%"),o.className="iScrollVerticalScrollbar"),o.style.cssText+=";overflow:hidden",e||(o.style.pointerEvents="none"),o.appendChild(n),o}function n(e,s){this.wrapper="string"==typeof s.el?i.querySelector(s.el):s.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=e,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var o in s)this.options[o]=s[o];if(this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(a.addEvent(this.indicator,"touchstart",this),a.addEvent(t,"touchend",this)),this.options.disablePointer||(a.addEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.addEvent(t,a.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(a.addEvent(this.indicator,"mousedown",this),a.addEvent(t,"mouseup",this))),this.options.fade){this.wrapperStyle[a.style.transform]=this.scroller.translateZ;var n=a.style.transitionDuration;if(!n)return;this.wrapperStyle[n]=a.isBadAndroid?"0.0001ms":"0ms";var h=this;a.isBadAndroid&&r(function(){"0.0001ms"===h.wrapperStyle[n]&&(h.wrapperStyle[n]="0s")}),this.wrapperStyle.opacity="0"}}var r=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(i){t.setTimeout(i,1e3/60)},a=function(){function s(t){return r!==!1&&(""===r?t:r+t.charAt(0).toUpperCase()+t.substr(1))}var o={},n=i.createElement("div").style,r=function(){for(var t,i=["t","webkitT","MozT","msT","OT"],e=0,s=i.length;e<s;e++)if(t=i[e]+"ransform",t in n)return i[e].substr(0,i[e].length-1);return!1}();o.getTime=Date.now||function(){return(new Date).getTime()},o.extend=function(t,i){for(var e in i)t[e]=i[e]},o.addEvent=function(t,i,e,s){t.addEventListener(i,e,!!s)},o.removeEvent=function(t,i,e,s){t.removeEventListener(i,e,!!s)},o.prefixPointerEvent=function(i){return t.MSPointerEvent?"MSPointer"+i.charAt(7).toUpperCase()+i.substr(8):i},o.momentum=function(t,i,s,o,n,r){var a,h,l=t-i,c=e.abs(l)/s;return r=void 0===r?6e-4:r,a=t+c*c/(2*r)*(l<0?-1:1),h=c/r,a<o?(a=n?o-n/2.5*(c/8):o,l=e.abs(a-t),h=l/c):a>0&&(a=n?n/2.5*(c/8):0,l=e.abs(t)+a,h=l/c),{destination:e.round(a),duration:h}};var a=s("transform");return o.extend(o,{hasTransform:a!==!1,hasPerspective:s("perspective")in n,hasTouch:"ontouchstart"in t,hasPointer:!(!t.PointerEvent&&!t.MSPointerEvent),hasTransition:s("transition")in n}),o.isBadAndroid=function(){var i=t.navigator.appVersion;if(/Android/.test(i)&&!/Chrome\/\d/.test(i)){var e=i.match(/Safari\/(\d+.\d)/);return!(e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e.length>=2)||parseFloat(e[1])<535.19}return!1}(),o.extend(o.style={},{transform:a,transitionTimingFunction:s("transitionTimingFunction"),transitionDuration:s("transitionDuration"),transitionDelay:s("transitionDelay"),transformOrigin:s("transformOrigin")}),o.hasClass=function(t,i){var e=new RegExp("(^|\\s)"+i+"(\\s|$)");return e.test(t.className)},o.addClass=function(t,i){if(!o.hasClass(t,i)){var e=t.className.split(" ");e.push(i),t.className=e.join(" ")}},o.removeClass=function(t,i){if(o.hasClass(t,i)){var e=new RegExp("(^|\\s)"+i+"(\\s|$)","g");t.className=t.className.replace(e," ")}},o.offset=function(t){for(var i=-t.offsetLeft,e=-t.offsetTop;t=t.offsetParent;)i-=t.offsetLeft,e-=t.offsetTop;return{left:i,top:e}},o.preventDefaultException=function(t,i){for(var e in i)if(i[e].test(t[e]))return!0;return!1},o.extend(o.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),o.extend(o.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return e.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var i=4;return(t-=1)*t*((i+1)*t+i)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var i=.22,s=.4;return 0===t?0:1==t?1:s*e.pow(2,-10*t)*e.sin((t-i/4)*(2*e.PI)/i)+1}}}),o.tap=function(t,e){var s=i.createEvent("Event");s.initEvent(e,!0,!0),s.pageX=t.pageX,s.pageY=t.pageY,t.target.dispatchEvent(s)},o.click=function(e){var s,o=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(o.tagName)||(s=i.createEvent(t.MouseEvent?"MouseEvents":"Event"),s.initEvent("click",!0,!0),s.view=e.view||t,s.detail=1,s.screenX=o.screenX||0,s.screenY=o.screenY||0,s.clientX=o.clientX||0,s.clientY=o.clientY||0,s.ctrlKey=!!e.ctrlKey,s.altKey=!!e.altKey,s.shiftKey=!!e.shiftKey,s.metaKey=!!e.metaKey,s.button=0,s.relatedTarget=null,s._constructed=!0,o.dispatchEvent(s))},o}();s.prototype={version:"5.2.0",_init:function(){this._initEvents(),this.options.zoom&&this._initZoom(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if(1!=a.eventType[t.type]){var i;if(i=t.which?t.button:t.button<2?0:4==t.button?1:2,0!==i)return}if(this.enabled&&(!this.initiated||a.eventType[t.type]===this.initiated)){!this.options.preventDefault||a.isBadAndroid||a.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var s,o=t.touches?t.touches[0]:t;this.initiated=a.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=a.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,s=this.getComputedPosition(),this._translate(e.round(s.x),e.round(s.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=o.pageX,this.pointY=o.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var i,s,o,n,r=t.touches?t.touches[0]:t,h=r.pageX-this.pointX,l=r.pageY-this.pointY,c=a.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=h,this.distY+=l,o=e.abs(this.distX),n=e.abs(this.distY),!(c-this.endTime>300&&o<10&&n<10)){if(this.directionLocked||this.options.freeScroll||(o>n+this.options.directionLockThreshold?this.directionLocked="h":n>=o+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);h=0}h=this.hasHorizontalScroll?h:0,l=this.hasVerticalScroll?l:0,i=this.x+h,s=this.y+l,(i>0||i<this.maxScrollX)&&(i=this.options.bounce?this.x+h/3:i>0?0:this.maxScrollX),(s>0||s<this.maxScrollY)&&(s=this.options.bounce?this.y+l/3:s>0?0:this.maxScrollY),this.directionX=h>0?-1:h<0?1:0,this.directionY=l>0?-1:l<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(i,s),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y)}}},_end:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&!a.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var i,s,o=(t.changedTouches?t.changedTouches[0]:t,a.getTime()-this.startTime),n=e.round(this.x),r=e.round(this.y),h=e.abs(n-this.startX),l=e.abs(r-this.startY),c=0,p="";if(this.isInTransition=0,this.initiated=0,this.endTime=a.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(n,r),!this.moved)return this.options.tap&&a.tap(t,this.options.tap),this.options.click&&a.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&o<200&&h<100&&l<100)return void this._execEvent("flick");if(this.options.momentum&&o<300&&(i=this.hasHorizontalScroll?a.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:n,duration:0},s=this.hasVerticalScroll?a.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:r,duration:0},n=i.destination,r=s.destination,c=e.max(i.duration,s.duration),this.isInTransition=1),this.options.snap){var u=this._nearestSnap(n,r);this.currentPage=u,c=this.options.snapSpeed||e.max(e.max(e.min(e.abs(n-u.x),1e3),e.min(e.abs(r-u.y),1e3)),300),n=u.x,r=u.y,this.directionX=0,this.directionY=0,p=this.options.bounceEasing}return n!=this.x||r!=this.y?((n>0||n<this.maxScrollX||r>0||r<this.maxScrollY)&&(p=a.ease.quadratic),void this.scrollTo(n,r,c,p)):void this._execEvent("scrollEnd")}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var i=this.x,e=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?i=0:this.x<this.maxScrollX&&(i=this.maxScrollX),!this.hasVerticalScroll||this.y>0?e=0:this.y<this.maxScrollY&&(e=this.maxScrollY),(i!=this.x||e!=this.y)&&(this.scrollTo(i,e,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=e.round(this.scroller.offsetWidth*this.scale),this.scrollerHeight=e.round(this.scroller.offsetHeight*this.scale),this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=a.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,i){this._events[t]||(this._events[t]=[]),this._events[t].push(i)},off:function(t,i){if(this._events[t]){var e=this._events[t].indexOf(i);e>-1&&this._events[t].splice(e,1)}},_execEvent:function(t){if(this._events[t]){var i=0,e=this._events[t].length;if(e)for(;i<e;i++)this._events[t][i].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,i,e,s){t=this.x+t,i=this.y+i,e=e||0,this.scrollTo(t,i,e,s)},scrollTo:function(t,i,e,s){s=s||a.ease.circular,this.isInTransition=this.options.useTransition&&e>0;var o=this.options.useTransition&&s.style;!e||o?(o&&(this._transitionTimingFunction(s.style),this._transitionTime(e)),this._translate(t,i)):this._animate(t,i,e,s.fn)},scrollToElement:function(t,i,s,o,n){if(t=t.nodeType?t:this.scroller.querySelector(t)){var r=a.offset(t);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,s===!0&&(s=e.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),o===!0&&(o=e.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=s||0,r.top-=o||0,r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>0?0:r.top<this.maxScrollY?this.maxScrollY:r.top,i=void 0===i||null===i||"auto"===i?e.max(e.abs(this.x-r.left),e.abs(this.y-r.top)):i,this.scrollTo(r.left,r.top,i,n)}},_transitionTime:function(t){if(this.options.useTransition){t=t||0;var i=a.style.transitionDuration;if(i){if(this.scrollerStyle[i]=t+"ms",!t&&a.isBadAndroid){this.scrollerStyle[i]="0.0001ms";var e=this;r(function(){"0.0001ms"===e.scrollerStyle[i]&&(e.scrollerStyle[i]="0s")})}if(this.indicators)for(var s=this.indicators.length;s--;)this.indicators[s].transitionTime(t)}}},_transitionTimingFunction:function(t){if(this.scrollerStyle[a.style.transitionTimingFunction]=t,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].transitionTimingFunction(t)},_translate:function(t,i){if(this.options.useTransform?this.scrollerStyle[a.style.transform]="translate("+t+"px,"+i+"px) scale("+this.scale+") "+this.translateZ:(t=e.round(t),i=e.round(i),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=i+"px"),this.x=t,this.y=i,this.indicators)for(var s=this.indicators.length;s--;)this.indicators[s].updatePosition()},_initEvents:function(i){var e=i?a.removeEvent:a.addEvent,s=this.options.bindToWrapper?this.wrapper:t;e(t,"orientationchange",this),e(t,"resize",this),this.options.click&&e(this.wrapper,"click",this,!0),this.options.disableMouse||(e(this.wrapper,"mousedown",this),e(s,"mousemove",this),e(s,"mousecancel",this),e(s,"mouseup",this)),a.hasPointer&&!this.options.disablePointer&&(e(this.wrapper,a.prefixPointerEvent("pointerdown"),this),e(s,a.prefixPointerEvent("pointermove"),this),e(s,a.prefixPointerEvent("pointercancel"),this),e(s,a.prefixPointerEvent("pointerup"),this)),a.hasTouch&&!this.options.disableTouch&&(e(this.wrapper,"touchstart",this),e(s,"touchmove",this),e(s,"touchcancel",this),e(s,"touchend",this)),e(this.scroller,"transitionend",this),e(this.scroller,"webkitTransitionEnd",this),e(this.scroller,"oTransitionEnd",this),e(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var i,e,s=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(s=s[a.style.transform].split(")")[0].split(", "),i=+(s[12]||s[4]),e=+(s[13]||s[5])):(i=+s.left.replace(/[^-\d.]/g,""),e=+s.top.replace(/[^-\d.]/g,"")),{x:i,y:e}},_initIndicators:function(){function t(t){if(a.indicators)for(var i=a.indicators.length;i--;)t.call(a.indicators[i])}var i,e=this.options.interactiveScrollbars,s="string"!=typeof this.options.scrollbars,r=[],a=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(i={el:o("v",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:s,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(i.el),r.push(i)),this.options.scrollX&&(i={el:o("h",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:s,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(i.el),r.push(i))),this.options.indicators&&(r=r.concat(this.options.indicators));for(var h=r.length;h--;)this.indicators.push(new n(this,r[h]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){t(function(){this.fade()})}),this.on("scrollCancel",function(){t(function(){this.fade()})}),this.on("scrollStart",function(){t(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){t(function(){this.fade(1,!0)})})),this.on("refresh",function(){t(function(){this.refresh()})}),this.on("destroy",function(){t(function(){this.destroy()}),delete this.indicators})},_initZoom:function(){this.scrollerStyle[a.style.transformOrigin]="0 0"},_zoomStart:function(t){var i=e.abs(t.touches[0].pageX-t.touches[1].pageX),s=e.abs(t.touches[0].pageY-t.touches[1].pageY);this.touchesDistanceStart=e.sqrt(i*i+s*s),this.startScale=this.scale,this.originX=e.abs(t.touches[0].pageX+t.touches[1].pageX)/2+this.wrapperOffset.left-this.x,this.originY=e.abs(t.touches[0].pageY+t.touches[1].pageY)/2+this.wrapperOffset.top-this.y,this._execEvent("zoomStart")},_zoom:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var i,s,o,n=e.abs(t.touches[0].pageX-t.touches[1].pageX),r=e.abs(t.touches[0].pageY-t.touches[1].pageY),h=e.sqrt(n*n+r*r),l=1/this.touchesDistanceStart*h*this.startScale;this.scaled=!0,l<this.options.zoomMin?l=.5*this.options.zoomMin*e.pow(2,l/this.options.zoomMin):l>this.options.zoomMax&&(l=2*this.options.zoomMax*e.pow(.5,this.options.zoomMax/l)),i=l/this.startScale,s=this.originX-this.originX*i+this.startX,o=this.originY-this.originY*i+this.startY,this.scale=l,this.scrollTo(s,o,0)}},_zoomEnd:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var i,e,s;this.isInTransition=0,this.initiated=0,this.scale>this.options.zoomMax?this.scale=this.options.zoomMax:this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin),this.refresh(),s=this.scale/this.startScale,i=this.originX-this.originX*s+this.startX,e=this.originY-this.originY*s+this.startY,i>0?i=0:i<this.maxScrollX&&(i=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY),this.x==i&&this.y==e||this.scrollTo(i,e,this.options.bounceTime),this.scaled=!1,this._execEvent("zoomEnd")}},zoom:function(t,i,e,s){if(t<this.options.zoomMin?t=this.options.zoomMin:t>this.options.zoomMax&&(t=this.options.zoomMax),t!=this.scale){var o=t/this.scale;i=void 0===i?this.wrapperWidth/2:i,e=void 0===e?this.wrapperHeight/2:e,s=void 0===s?300:s,i=i+this.wrapperOffset.left-this.x,e=e+this.wrapperOffset.top-this.y,i=i-i*o+this.x,e=e-e*o+this.y,this.scale=t,this.refresh(),i>0?i=0:i<this.maxScrollX&&(i=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY),this.scrollTo(i,e,s)}},_wheelZoom:function(t){var i,s,o=this;if(clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){o._execEvent("zoomEnd")},400),"deltaX"in t)i=-t.deltaY/e.abs(t.deltaY);else if("wheelDeltaX"in t)i=t.wheelDeltaY/e.abs(t.wheelDeltaY);else if("wheelDelta"in t)i=t.wheelDelta/e.abs(t.wheelDelta);else{if(!("detail"in t))return;i=-t.detail/e.abs(t.wheelDelta)}s=this.scale+i/5,this.zoom(s,t.pageX,t.pageY,0)},_initWheel:function(){a.addEvent(this.wrapper,"wheel",this),a.addEvent(this.wrapper,"mousewheel",this),a.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){clearTimeout(this.wheelTimeout),this.wheelTimeout=null,a.removeEvent(this.wrapper,"wheel",this),a.removeEvent(this.wrapper,"mousewheel",this),a.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault();var i,s,o,n,r=this;if(void 0===this.wheelTimeout&&r._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){r.options.snap||r._execEvent("scrollEnd"),r.wheelTimeout=void 0},400),"deltaX"in t)1===t.deltaMode?(i=-t.deltaX*this.options.mouseWheelSpeed,s=-t.deltaY*this.options.mouseWheelSpeed):(i=-t.deltaX,s=-t.deltaY);else if("wheelDeltaX"in t)i=t.wheelDeltaX/120*this.options.mouseWheelSpeed,s=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)i=s=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;i=s=-t.detail/3*this.options.mouseWheelSpeed}if(i*=this.options.invertWheelDirection,s*=this.options.invertWheelDirection,this.hasVerticalScroll||(i=s,s=0),this.options.snap)return o=this.currentPage.pageX,n=this.currentPage.pageY,i>0?o--:i<0&&o++,s>0?n--:s<0&&n++,void this.goToPage(o,n);o=this.x+e.round(this.hasHorizontalScroll?i:0),n=this.y+e.round(this.hasVerticalScroll?s:0),this.directionX=i>0?-1:i<0?1:0,this.directionY=s>0?-1:s<0?1:0,o>0?o=0:o<this.maxScrollX&&(o=this.maxScrollX),n>0?n=0:n<this.maxScrollY&&(n=this.maxScrollY),this.scrollTo(o,n,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,i,s,o,n,r,a=0,h=0,l=0,c=this.options.snapStepX||this.wrapperWidth,p=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(s=e.round(c/2),o=e.round(p/2);l>-this.scrollerWidth;){for(this.pages[a]=[],t=0,n=0;n>-this.scrollerHeight;)this.pages[a][t]={x:e.max(l,this.maxScrollX),y:e.max(n,this.maxScrollY),width:c,height:p,cx:l-s,cy:n-o},n-=p,t++;l-=c,a++}else for(r=this.options.snap,t=r.length,i=-1;a<t;a++)(0===a||r[a].offsetLeft<=r[a-1].offsetLeft)&&(h=0,i++),this.pages[h]||(this.pages[h]=[]),l=e.max(-r[a].offsetLeft,this.maxScrollX),n=e.max(-r[a].offsetTop,this.maxScrollY),s=l-e.round(r[a].offsetWidth/2),o=n-e.round(r[a].offsetHeight/2),this.pages[h][i]={x:l,y:n,width:r[a].offsetWidth,height:r[a].offsetHeight,cx:s,cy:o},l>this.maxScrollX&&h++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=e.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=e.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||e.max(e.max(e.min(e.abs(this.x-this.startX),1e3),e.min(e.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,i){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var s=0,o=this.pages.length,n=0;if(e.abs(t-this.absStartX)<this.snapThresholdX&&e.abs(i-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),i>0?i=0:i<this.maxScrollY&&(i=this.maxScrollY);s<o;s++)if(t>=this.pages[s][0].cx){t=this.pages[s][0].x;break}for(o=this.pages[s].length;n<o;n++)if(i>=this.pages[0][n].cy){i=this.pages[0][n].y;break}return s==this.currentPage.pageX&&(s+=this.directionX,s<0?s=0:s>=this.pages.length&&(s=this.pages.length-1),t=this.pages[s][0].x),n==this.currentPage.pageY&&(n+=this.directionY,n<0?n=0:n>=this.pages[0].length&&(n=this.pages[0].length-1),i=this.pages[0][n].y),{x:t,y:i,pageX:s,pageY:n}},goToPage:function(t,i,s,o){o=o||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:t<0&&(t=0),i>=this.pages[t].length?i=this.pages[t].length-1:i<0&&(i=0);var n=this.pages[t][i].x,r=this.pages[t][i].y;s=void 0===s?this.options.snapSpeed||e.max(e.max(e.min(e.abs(n-this.x),1e3),e.min(e.abs(r-this.y),1e3)),300):s,this.currentPage={x:n,y:r,pageX:t,pageY:i},this.scrollTo(n,r,s,o)},next:function(t,i){var e=this.currentPage.pageX,s=this.currentPage.pageY;e++,e>=this.pages.length&&this.hasVerticalScroll&&(e=0,s++),this.goToPage(e,s,t,i)},prev:function(t,i){var e=this.currentPage.pageX,s=this.currentPage.pageY;e--,e<0&&this.hasVerticalScroll&&(e=0,s--),this.goToPage(e,s,t,i)},_initKeys:function(i){var e,s={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==_typeof(this.options.keyBindings))for(e in this.options.keyBindings)"string"==typeof this.options.keyBindings[e]&&(this.options.keyBindings[e]=this.options.keyBindings[e].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(e in s)this.options.keyBindings[e]=this.options.keyBindings[e]||s[e];a.addEvent(t,"keydown",this),this.on("destroy",function(){a.removeEvent(t,"keydown",this)})},_key:function(t){if(this.enabled){var i,s=this.options.snap,o=s?this.currentPage.pageX:this.x,n=s?this.currentPage.pageY:this.y,r=a.getTime(),h=this.keyTime||0,l=.25;switch(this.options.useTransition&&this.isInTransition&&(i=this.getComputedPosition(),this._translate(e.round(i.x),e.round(i.y)),this.isInTransition=!1),this.keyAcceleration=r-h<200?e.min(this.keyAcceleration+l,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?o+=s?1:this.wrapperWidth:n+=s?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?o-=s?1:this.wrapperWidth:n-=s?1:this.wrapperHeight;break;case this.options.keyBindings.end:o=s?this.pages.length-1:this.maxScrollX,n=s?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=0,n=0;break;case this.options.keyBindings.left:o+=s?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:n+=s?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=s?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:n-=s?1:5+this.keyAcceleration>>0;break;default:return}if(s)return void this.goToPage(o,n);o>0?(o=0,this.keyAcceleration=0):o<this.maxScrollX&&(o=this.maxScrollX,this.keyAcceleration=0),n>0?(n=0,this.keyAcceleration=0):n<this.maxScrollY&&(n=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(o,n,0),this.keyTime=r}},_animate:function(t,i,e,s){function o(){var u,d,f,g=a.getTime();return g>=p?(n.isAnimating=!1,n._translate(t,i),void(n.resetPosition(n.options.bounceTime)||n._execEvent("scrollEnd"))):(g=(g-c)/e,f=s(g),u=(t-h)*f+h,d=(i-l)*f+l,n._translate(u,d),void(n.isAnimating&&r(o)))}var n=this,h=this.x,l=this.y,c=a.getTime(),p=c+e;this.isAnimating=!0,o()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t),this.options.zoom&&t.touches&&t.touches.length>1&&this._zoomStart(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":if(this.options.zoom&&t.touches&&t.touches[1])return void this._zoom(t);this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":if(this.scaled)return void this._zoomEnd(t);this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":if("zoom"==this.options.wheelAction)return void this._wheelZoom(t);this._wheel(t);break;case"keydown":this._key(t)}}},n.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.fadeScrollbars&&(clearTimeout(this.fadeTimeout),this.fadeTimeout=null),this.options.interactive&&(a.removeEvent(this.indicator,"touchstart",this),a.removeEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.removeEvent(this.indicator,"mousedown",this),a.removeEvent(t,"touchmove",this),a.removeEvent(t,a.prefixPointerEvent("pointermove"),this),a.removeEvent(t,"mousemove",this),a.removeEvent(t,"touchend",this),a.removeEvent(t,a.prefixPointerEvent("pointerup"),this),a.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(i){var e=i.touches?i.touches[0]:i;i.preventDefault(),i.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=e.pageX,this.lastPointY=e.pageY,this.startTime=a.getTime(),this.options.disableTouch||a.addEvent(t,"touchmove",this),this.options.disablePointer||a.addEvent(t,a.prefixPointerEvent("pointermove"),this),this.options.disableMouse||a.addEvent(t,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){var i,e,s,o,n=t.touches?t.touches[0]:t;a.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,i=n.pageX-this.lastPointX,this.lastPointX=n.pageX,e=n.pageY-this.lastPointY,this.lastPointY=n.pageY,s=this.x+i,o=this.y+e,this._pos(s,o),t.preventDefault(),t.stopPropagation()},_end:function(i){if(this.initiated){if(this.initiated=!1,i.preventDefault(),i.stopPropagation(),a.removeEvent(t,"touchmove",this),a.removeEvent(t,a.prefixPointerEvent("pointermove"),this),a.removeEvent(t,"mousemove",this),this.scroller.options.snap){var s=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),o=this.options.snapSpeed||e.max(e.max(e.min(e.abs(this.scroller.x-s.x),1e3),e.min(e.abs(this.scroller.y-s.y),1e3)),300);this.scroller.x==s.x&&this.scroller.y==s.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=s,this.scroller.scrollTo(s.x,s.y,o,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0;var i=a.style.transitionDuration;if(i&&(this.indicatorStyle[i]=t+"ms",!t&&a.isBadAndroid)){this.indicatorStyle[i]="0.0001ms";var e=this;r(function(){"0.0001ms"===e.indicatorStyle[i]&&(e.indicatorStyle[i]="0s")})}},transitionTimingFunction:function(t){
this.indicatorStyle[a.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(a.addClass(this.wrapper,"iScrollBothScrollbars"),a.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(a.removeClass(this.wrapper,"iScrollBothScrollbars"),a.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=e.max(e.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=e.max(e.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&e.round(this.sizeRatioX*this.scroller.x)||0,i=this.options.listenY&&e.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=e.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=e.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),i<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=e.max(this.indicatorHeight+3*i,8),this.indicatorStyle.height=this.height+"px"),i=this.minBoundaryY):i>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=e.max(this.indicatorHeight-3*(i-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",i=this.maxPosY+this.indicatorHeight-this.height):i=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=i,this.scroller.options.useTransform?this.indicatorStyle[a.style.transform]="translate("+t+"px,"+i+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=i+"px")},_pos:function(t,i){t<0?t=0:t>this.maxPosX&&(t=this.maxPosX),i<0?i=0:i>this.maxPosY&&(i=this.maxPosY),t=this.options.listenX?e.round(t/this.sizeRatioX):this.scroller.x,i=this.options.listenY?e.round(i/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,i)},fade:function(t,i){if(!i||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var e=t?250:500,s=t?0:300;t=t?"1":"0",this.wrapperStyle[a.style.transitionDuration]=e+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),s)}}},s.utils=a,"undefined"!=typeof module&&module.exports?module.exports=s:"function"==typeof define&&define.amd?define(function(){return s}):t.IScroll=s}(window,document,Math),function(t,i){"function"==typeof define&&(define.amd||define.cmd)?define(i):t.touch=i()}(window,function(){function t(){var t="mouseup mousedown mousemove mouseout",e="touchstart touchmove touchend touchcancel",s=i.hasTouch?e:t;s.split(" ").forEach(function(t){document.addEventListener(t,X,!1)})}var i={};i.PCevts={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseout"},i.hasTouch="ontouchstart"in window,i.getType=function(t){return Object.prototype.toString.call(t).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},i.getSelector=function(t){if(t.id)return"#"+t.id;if(t.className){var i=t.className.split(/\s+/);return"."+i.join(".")}return t===document?"body":t.tagName.toLowerCase()},i.matchSelector=function(t,i){return t.webkitMatchesSelector(i)},i.getEventListeners=function(t){return t.listeners},i.getPCevts=function(t){return this.PCevts[t]||t},i.forceReflow=function(){var t="reflowDivBlock",i=document.getElementById(t);i||(i=document.createElement("div"),i.id=t,document.body.appendChild(i));var e=i.parentNode,s=i.nextSibling;e.removeChild(i),e.insertBefore(i,s)},i.simpleClone=function(t){return Object.create(t)},i.getPosOfEvent=function(t){if(this.hasTouch){for(var i=[],e=null,s=0,o=t.touches.length;s<o;s++)e=t.touches[s],i.push({x:e.pageX,y:e.pageY});return i}return[{x:t.pageX,y:t.pageY}]},i.getDistance=function(t,i){var e=i.x-t.x,s=i.y-t.y;return Math.sqrt(e*e+s*s)},i.getFingers=function(t){return t.touches?t.touches.length:1},i.calScale=function(t,i){if(t.length>=2&&i.length>=2){var e=this.getDistance(t[1],t[0]),s=this.getDistance(i[1],i[0]);return s/e}return 1},i.getAngle=function(t,i){return 180*Math.atan2(i.y-t.y,i.x-t.x)/Math.PI},i.getAngle180=function(t,i){var e=Math.atan((i.y-t.y)*-1/(i.x-t.x))*(180/Math.PI);return e<0?e+180:e},i.getDirectionFromAngle=function(t){var i={up:t<-45&&t>-135,down:t>=45&&t<135,left:t>=135||t<=-135,right:t>=-45&&t<=45};for(var e in i)if(i[e])return e;return null},i.getXYByElement=function(t){for(var i=0,e=0;t.offsetParent;)i+=t.offsetLeft,e+=t.offsetTop,t=t.offsetParent;return{left:i,top:e}},i.reset=function(){a=h=l=null,m=f=c=p=!1,u=!1,n={},S=!1},i.isTouchMove=function(t){return"touchmove"===t.type||"mousemove"===t.type},i.isTouchEnd=function(t){return"touchend"===t.type||"mouseup"===t.type||"touchcancel"===t.type},i.env=function(){var t={},i=navigator.userAgent,e=i.match(/(Android)[\s\/]+([\d\.]+)/),s=i.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),o=i.match(/(Windows\s+Phone)\s([\d\.]+)/),n=/WebKit\/[\d.]+/i.test(i),r=!!s&&(navigator.standalone?n:/Safari/i.test(i)&&!/CriOS/i.test(i)&&!/MQQBrowser/i.test(i));return e&&(t.android=!0,t.version=e[2]),s&&(t.ios=!0,t.version=s[2].replace(/_/g,"."),t.ios7=/^7/.test(t.version),"iPad"===s[1]?t.ipad=!0:"iPhone"===s[1]?(t.iphone=!0,t.iphone5=568==screen.height):"iPod"===s[1]&&(t.ipod=!0)),o&&(t.wp=!0,t.version=o[2],t.wp8=/^8/.test(t.version)),n&&(t.webkit=!0),r&&(t.safari=!0),t}();var e={proxyid:0,proxies:[],trigger:function(t,i,e){e=e||{};var s,o={bubbles:!0,cancelable:!0,detail:e};try{"undefined"!=typeof CustomEvent?(s=new CustomEvent(i,o),t&&t.dispatchEvent(s)):(s=document.createEvent("CustomEvent"),s.initCustomEvent(i,!0,!0,e),t&&t.dispatchEvent(s))}catch(t){console.warn("Touch.js is not supported by environment.")}},bind:function(t,e,s){t.listeners=t.listeners||{},t.listeners[e]?t.listeners[e].push(s):t.listeners[e]=[s];var o=function(t){i.env.ios7&&i.forceReflow(),t.originEvent=t;for(var e in t.detail)"type"!==e&&(t[e]=t.detail[e]);t.startRotate=function(){S=!0};var o=s.call(t.target,t);"undefined"==typeof o||o||(t.stopPropagation(),t.preventDefault())};s.proxy=s.proxy||{},s.proxy[e]?s.proxy[e].push(this.proxyid++):s.proxy[e]=[this.proxyid++],this.proxies.push(o),t.addEventListener&&t.addEventListener(e,o,!1)},unbind:function(t,i,e){if(e){var s=e.proxy[i];s&&s.length&&s.forEach(function(e){t.removeEventListener&&t.removeEventListener(i,this.proxies[this.proxyid],!1)})}else{var o=t.listeners[i];o&&o.length&&o.forEach(function(e){t.removeEventListener(i,e,!1)})}},delegate:function(t,e,s,o){var n=function(e){var n,r;e.originEvent=e;for(var a in e.detail)"type"!==a&&(e[a]=e.detail[a]);e.startRotate=function(){S=!0};var h=i.getSelector(t)+" "+s,l=i.matchSelector(e.target,h),c=i.matchSelector(e.target,h+" "+e.target.nodeName);if(!l&&c){for(i.env.ios7&&i.forceReflow(),n=e.target;!i.matchSelector(n,h);)n=n.parentNode;r=o.call(e.target,e),"undefined"==typeof r||r||(e.stopPropagation(),e.preventDefault())}else i.env.ios7&&i.forceReflow(),(l||c)&&(r=o.call(e.target,e),"undefined"==typeof r||r||(e.stopPropagation(),e.preventDefault()))};o.proxy=o.proxy||{},o.proxy[e]?o.proxy[e].push(this.proxyid++):o.proxy[e]=[this.proxyid++],this.proxies.push(n),t.listeners=t.listeners||{},t.listeners[e]?t.listeners[e].push(n):t.listeners[e]=[n],t.addEventListener&&t.addEventListener(e,n,!1)},undelegate:function(t,i,e,s){if(s){var o=s.proxy[i];o.length&&o.forEach(function(e){t.removeEventListener&&t.removeEventListener(i,this.proxies[this.proxyid],!1)})}else{var n=t.listeners[i];n.forEach(function(e){t.removeEventListener(i,e,!1)})}}},s={tap:!0,doubleTap:!0,tapMaxDistance:10,hold:!0,tapTime:200,holdTime:650,maxDoubleTapInterval:300,swipe:!0,swipeTime:300,swipeMinDistance:18,swipeFactor:5,drag:!0,pinch:!0,minScaleRate:0,minRotationAngle:0},o={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",CLICK:"click",PINCH_START:"pinchstart",PINCH_END:"pinchend",PINCH:"pinch",PINCH_IN:"pinchin",PINCH_OUT:"pinchout",ROTATION_LEFT:"rotateleft",ROTATION_RIGHT:"rotateright",ROTATION:"rotate",SWIPE_START:"swipestart",SWIPING:"swiping",SWIPE_END:"swipeend",SWIPE_LEFT:"swipeleft",SWIPE_RIGHT:"swiperight",SWIPE_UP:"swipeup",SWIPE_DOWN:"swipedown",SWIPE:"swipe",DRAG:"drag",DRAGSTART:"dragstart",DRAGEND:"dragend",HOLD:"hold",TAP:"tap",DOUBLE_TAP:"doubletap"},n={start:null,move:null,end:null},r=0,a=null,h=null,l=null,c=!1,p=!1,u=!1,d={},f=!1,g=null,m=!1,v=null,y=1,S=!1,T=[],x=0,w=0,E=0,b=null,P={getAngleDiff:function(t){for(var e=parseInt(x-i.getAngle180(t[0],t[1]),10),s=0;Math.abs(e-w)>90&&s++<50;)w<0?e-=180:e+=180;return w=parseInt(e,10)},pinch:function(t){var r=t.target;if(s.pinch){if(!f)return;if(i.getFingers(t)<2&&!i.isTouchEnd(t))return;var a=i.calScale(n.start,n.move),h=this.getAngleDiff(n.move),l={type:"",originEvent:t,scale:a,rotation:h,direction:h>0?"right":"left",fingersCount:i.getFingers(t)};if(p?i.isTouchMove(t)?(l.fingerStatus="move",e.trigger(r,o.PINCH,l)):i.isTouchEnd(t)&&(l.fingerStatus="end",e.trigger(r,o.PINCH_END,l),i.reset()):(p=!0,l.fingerStatus="start",e.trigger(r,o.PINCH_START,l)),Math.abs(1-a)>s.minScaleRate){var c=i.simpleClone(l),u=1e-11;a>y?(y=a-u,e.trigger(r,o.PINCH_OUT,c,!1)):a<y&&(y=a+u,e.trigger(r,o.PINCH_IN,c,!1)),i.isTouchEnd(t)&&(y=1)}if(Math.abs(h)>s.minRotationAngle){var d,g=i.simpleClone(l);d=h>0?o.ROTATION_RIGHT:o.ROTATION_LEFT,e.trigger(r,d,g,!1),e.trigger(r,o.ROTATION,l)}}},rotateSingleFinger:function(t){var s=t.target;if(S&&i.getFingers(t)<2){if(!n.move)return;if(T.length<2){var r=i.getXYByElement(s);T=[{x:r.left+s.offsetWidth/2,y:r.top+s.offsetHeight/2},n.move[0]],x=parseInt(i.getAngle180(T[0],T[1]),10)}var a=[T[0],n.move[0]],h=this.getAngleDiff(a),l={type:"",originEvent:t,rotation:h,direction:h>0?"right":"left",fingersCount:i.getFingers(t)};i.isTouchMove(t)?l.fingerStatus="move":(i.isTouchEnd(t)||"mouseout"===t.type)&&(l.fingerStatus="end",e.trigger(s,o.PINCH_END,l),i.reset());var c=h>0?o.ROTATION_RIGHT:o.ROTATION_LEFT;e.trigger(s,c,l),e.trigger(s,o.ROTATION,l)}},swipe:function(t){var a=t.target;if(f&&n.move&&!(i.getFingers(t)>1)){var h=Date.now(),l=h-r,p=i.getDistance(n.start[0],n.move[0]),g={x:n.move[0].x-d.left,y:n.move[0].y-d.top},m=i.getAngle(n.start[0],n.move[0]),v=i.getDirectionFromAngle(m),y=l/1e3,S=10*(10-s.swipeFactor)*y*y,T={type:o.SWIPE,originEvent:t,position:g,direction:v,distance:p,distanceX:n.move[0].x-n.start[0].x,distanceY:n.move[0].y-n.start[0].y,x:n.move[0].x-n.start[0].x,y:n.move[0].y-n.start[0].y,angle:m,duration:l,fingersCount:i.getFingers(t),factor:S};if(s.swipe){var x=function(){var t=o;switch(v){case"up":e.trigger(a,t.SWIPE_UP,T);break;case"down":e.trigger(a,t.SWIPE_DOWN,T);break;case"left":e.trigger(a,t.SWIPE_LEFT,T);break;case"right":e.trigger(a,t.SWIPE_RIGHT,T)}};c?i.isTouchMove(t)?(T.fingerStatus=T.swipe="move",e.trigger(a,o.SWIPING,T),l>s.swipeTime&&l<s.swipeTime+50&&p>s.swipeMinDistance&&(x(),e.trigger(a,o.SWIPE,T,!1))):(i.isTouchEnd(t)||"mouseout"===t.type)&&(T.fingerStatus=T.swipe="end",e.trigger(a,o.SWIPE_END,T),s.swipeTime>l&&p>s.swipeMinDistance&&(x(),e.trigger(a,o.SWIPE,T,!1))):(T.fingerStatus=T.swipe="start",c=!0,e.trigger(a,o.SWIPE_START,T))}s.drag&&(u?i.isTouchMove(t)?(T.fingerStatus=T.swipe="move",e.trigger(a,o.DRAG,T)):i.isTouchEnd(t)&&(T.fingerStatus=T.swipe="end",e.trigger(a,o.DRAGEND,T)):(T.fingerStatus=T.swipe="start",u=!0,e.trigger(a,o.DRAGSTART,T)))}},tap:function(t){var a=t.target;if(s.tap){var h=Date.now(),l=h-r,c=i.getDistance(n.start[0],n.move?n.move[0]:n.start[0]);clearTimeout(g);var p=function(){if(b&&s.doubleTap&&r-E<s.maxDoubleTapInterval){var t=i.getDistance(b,n.start[0]);if(t<16)return!0}return!1}();if(p)return clearTimeout(v),void e.trigger(a,o.DOUBLE_TAP,{type:o.DOUBLE_TAP,originEvent:t,position:n.start[0]});if(s.tapMaxDistance<c)return;s.holdTime>l&&i.getFingers(t)<=1&&(m=!0,E=h,b=n.start[0],v=setTimeout(function(){e.trigger(a,o.TAP,{type:o.TAP,originEvent:t,fingersCount:i.getFingers(t),position:b})},s.tapTime))}},hold:function(t){var o=t.target;s.hold&&(clearTimeout(g),g=setTimeout(function(){if(n.start){var r=i.getDistance(n.start[0],n.move?n.move[0]:n.start[0]);s.tapMaxDistance<r||m||e.trigger(o,"hold",{type:"hold",originEvent:t,fingersCount:i.getFingers(t),position:n.start[0]})}},s.holdTime))}},X=function(t){var e=t.target;switch(t.type){case"touchstart":case"mousedown":T=[],f=!0,(!n.start||n.start.length<2)&&(n.start=i.getPosOfEvent(t)),i.getFingers(t)>=2&&(x=parseInt(i.getAngle180(n.start[0],n.start[1]),10)),r=Date.now(),a=t,d={};var s=e.getBoundingClientRect(),o=document.documentElement;d={top:s.top+(window.pageYOffset||o.scrollTop)-(o.clientTop||0),left:s.left+(window.pageXOffset||o.scrollLeft)-(o.clientLeft||0)},P.hold(t);break;case"touchmove":case"mousemove":if(!f||!n.start)return;n.move=i.getPosOfEvent(t),i.getFingers(t)>=2?P.pinch(t):S?P.rotateSingleFinger(t):P.swipe(t);break;case"touchend":case"touchcancel":case"mouseup":case"mouseout":if(!f)return;l=t,p?P.pinch(t):S?P.rotateSingleFinger(t):c?P.swipe(t):P.tap(t),i.reset(),x=0,w=0,t.touches&&1===t.touches.length&&(f=!0,S=!0)}},Y=function(){function t(t){i.hasTouch||(t=i.getPCevts(t)),l.forEach(function(i){e.delegate(i,t,a,r[t])})}function s(t){i.hasTouch||(t=i.getPCevts(t)),l.forEach(function(i){e.bind(i,t,r[t])})}var o,n,r,a,h=arguments;if(h.length<2||h>4)return console.error("unexpected arguments!");var l="string"===i.getType(h[0])?document.querySelectorAll(h[0]):h[0];if(l=l.length?Array.prototype.slice.call(l):[l],3===h.length&&"string"===i.getType(h[1]))return o=h[1].split(" "),n=h[2],void o.forEach(function(t){i.hasTouch||(t=i.getPCevts(t)),l.forEach(function(i){e.bind(i,t,n)})});if(3!==h.length||"object"!==i.getType(h[1]))if(2!==h.length||"object"!==i.getType(h[1])){if(4===h.length&&"object"===i.getType(h[2]))return o=h[1].split(" "),n=h[3],void o.forEach(function(t){i.hasTouch||(t=i.getPCevts(t)),l.forEach(function(i){e.bind(i,t,n)})});if(4===h.length){var c=l[0];return o=h[1].split(" "),a=h[2],n=h[3],void o.forEach(function(t){i.hasTouch||(t=i.getPCevts(t)),e.delegate(c,t,a,n)})}}else{r=h[1];for(var p in r)s(p)}else{r=h[1],a=h[2];for(var u in r)t(u)}},_=function(){var t,s,o=arguments;if(o.length<1||o.length>4)return console.error("unexpected arguments!");var n="string"===i.getType(o[0])?document.querySelectorAll(o[0]):o[0];if(n=n.length?Array.prototype.slice.call(n):[n],1===o.length||2===o.length)return void n.forEach(function(s){t=o[1]?o[1].split(" "):Object.keys(s.listeners),t.length&&t.forEach(function(t){i.hasTouch||(t=i.getPCevts(t)),e.unbind(s,t),e.undelegate(s,t)})});if(3===o.length&&"function"===i.getType(o[2]))return s=o[2],void n.forEach(function(n){t=o[1].split(" "),t.forEach(function(t){i.hasTouch||(t=i.getPCevts(t)),e.unbind(n,t,s)})});if(3===o.length&&"string"===i.getType(o[2])){var r=o[2];return void n.forEach(function(s){t=o[1].split(" "),t.forEach(function(t){i.hasTouch||(t=i.getPCevts(t)),e.undelegate(s,t,r)})})}return 4===o.length?(s=o[3],void n.forEach(function(n){t=o[1].split(" "),t.forEach(function(t){i.hasTouch||(t=i.getPCevts(t)),e.undelegate(n,t,r,s)})})):void 0},k=function(t,s,o){var n=arguments;i.hasTouch||(s=i.getPCevts(s));var r="string"===i.getType(n[0])?document.querySelectorAll(n[0]):n[0];r=r.length?Array.prototype.call(r):[r],r.forEach(function(t){e.trigger(t,s,o)})};t();var D={};return D.on=D.bind=D.live=Y,D.off=D.unbind=D.die=_,D.config=s,D.trigger=k,D}),!function(t){function i(t){for(var i=t.length,e=0,s=new Object;e<i;e++){var o=t[e].screenY;s[o]||(s[o]=[]),s[o].push(t[e])}return s}function e(e){t.Event.call(this),this.options=t.extend(s,e);var r=i(this.options.data),a=document.createDocumentFragment();this.fragmentNum=document.createDocumentFragment();var h=0,l=0,c=0;for(var p in r){var u=t.createEl("ul","ui-seats-row"),d=t.createEl("li"),f=r[p];1==r[p].length&&0==r[p][0].id||(h++,d.innerText=h);for(var g=0,m=f.length;g<m;g++){var v=null;0!=f[g].seatType&&1!=f[g].seatType||0==f[g].id?2!=f[g].seatType&&3!=f[g].seatType||0==f[g].id?0==f[g].id&&(v=t.createEl("li","ui-seats-aisle")):(l++,0==f[g].seatStatus?v=t.createEl("li","ui-seats-col-couple ui-seats-couple-white"):100==f[g].seatStatus&&(v=t.createEl("li","ui-seats-col-couple ui-seats-couple-forbid")),v.setAttribute("data-couple",!0),c++,c%2==0&&t.addClass(v,"ui-seats-couple-fix"),v.setAttribute("data-order",h+"排"+l+"座"),v.setAttribute("data-id",h+"_"+l),v.setAttribute("data-seat-id",f[g].id),o.set(h+"_"+l,v),v.onclick=this.options.click):(l++,0==f[g].seatStatus?v=t.createEl("li","ui-seats-col ui-seats-white"):100==f[g].seatStatus&&(v=t.createEl("li","ui-seats-col ui-seats-pink")),v.setAttribute("data-order",h+"排"+l+"座"),v.setAttribute("data-id",h+"_"+l),v.setAttribute("data-seat-id",f[g].id),o.set(h+"_"+l,v),v.onclick=this.options.click),u.appendChild(v)}l=0,a.appendChild(u),this.fragmentNum.appendChild(d)}this.target=document.getElementById(this.options.id),this.target&&this.target.appendChild(a),n.refresh(),this.initLeftBar(),this.initMidLine()}var s={aisle:"_",couple:"q",common:"c",canSelect:"ui-seats-white",hasSelect:"ui-seats-green",forbidSelect:"ui-seats-pink",coupleForbidSelect:"ui-seats-couple-forbid",coupleCanSelect:"ui-seats-couple-white",coupleHasSelect:"ui-seats-couple-pink",showLeftBar:!0},o=new Map,n=new IScroll("#J_seatScroll",{scrollX:!0,scrollY:!0,zoom:!0,zoomMax:2.5,zoomMin:.8,mouseWheel:!0,wheelAction:"zoom",preventDefault:!1,eventPassthrough:!1}),r=new IScroll("#J_seatNum",{scrollX:!1,scrollY:!0,zoom:!0,zoomMax:2.5,zoomMin:.8,mouseWheel:!0,wheelAction:"zoom",preventDefault:!1,eventPassthrough:!1});n.on("zoomEnd",function(){r.scrollTo(0,n.y)}),touch.on("#seatScroll","pinch",function(t){var i=n.scale;console.log("*************"+i),r.zoom(i)}),touch.on("#seatScroll","drag",function(t){r.scrollTo(0,n.y)}),e.prototype.initLeftBar=function(){var t=document.getElementById("seatsFilter");this.options.showLeftBar&&t&&t.appendChild(this.fragmentNum)},e.prototype.initMidLine=function(){var i=document.getElementById("seatScroll"),e=document.getElementById("seatsRoom"),s=i.scrollWidth,o=(i.scrollHeight,window.innerWidth),n=(window.innerHeight,t.createEl("div"));n.className="ui-seats-divider",n.style.left=s/2+"px",i.appendChild(n),i.style.left=-(s-o)/2+"px",e.style.left=-(s-o)/2+"px"},e.prototype.getSeat=function(t){return o.get(t)},e.prototype.setStatus=function(i,e){var o=this;return Array.isArray(i)&&i.forEach(function(i){t.removeClass(o.getSeat(i),s.hasSelect+" "+s.coupleHasSelect),t.addClass(o.getSeat(i),s[e])}),"string"==typeof i&&(t.removeClass(this.getSeat(i),s.hasSelect+" "+s.coupleHasSelect),t.addClass(this.getSeat(i),s[e])),this},e.prototype.getStatus=function(t){},e.prototype.isCoupleSeat=function(t){return!!this.getSeat(t).getAttribute("data-couple")},t.Seats=e}(pui);